import{B as e,C as t,D as n,E as a,F as l,G as s,H as u,I as o}from"../build/server.mjs";import{s as r,d as i,c,q as v,u as d,o as p,v as m,a3 as f}from"../routes/renderer.mjs";function createReusableTemplate(t={}){const{inheritAttrs:n=!0}=t,a=r(),l=i({setup:(e,{slots:t})=>()=>{a.value=t.default}}),s=i({inheritAttrs:n,props:t.props,setup:(e,{attrs:l,slots:s})=>()=>{var u;a.value;const o=null==(u=a.value)?void 0:u.call(a,{...null==t.props?keysToCamelKebabCase(l):e,$slots:s});return n&&1===(null==o?void 0:o.length)?o[0]:o}});return e({define:l,reuse:s},[l,s])}function keysToCamelKebabCase(e){const t={};for(const n in e)t[s(n)]=e[n];return t}const y=void 0,b=void 0;function useEventListener(...e){const l=[],cleanup=()=>{l.forEach(e=>e()),l.length=0},s=c(()=>{const n=t(v(e[0])).filter(e=>null!=e);return n.every(e=>"string"!=typeof e)?n:void 0}),o=n(()=>{var n,a;return[null!=(a=null==(n=s.value)?void 0:n.map(e=>function(e){var t;const n=v(e);return null!=(t=null==n?void 0:n.$el)?t:n}(e)))?a:[y].filter(e=>null!=e),t(v(s.value?e[1]:e[0])),t(d(s.value?e[2]:e[1])),v(s.value?e[3]:e[2])]},([e,t,n,a])=>{if(cleanup(),!(null==e?void 0:e.length)||!(null==t?void 0:t.length)||!(null==n?void 0:n.length))return;const s=u(a)?{...a}:a;l.push(...e.flatMap(e=>t.flatMap(t=>n.map(n=>((e,t,n,a)=>(e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)))(e,t,n,s)))))},{flush:"post"});return a(cleanup),()=>{o(),cleanup()}}function useSupported(e){const t=function(){const e=r(!1),t=m();return t&&p(()=>{e.value=!0},t),e}();return c(()=>(t.value,Boolean(e())))}function usePermission(e,t={}){const{controls:n=!1,navigator:a=b}=t,l=useSupported(()=>a&&"permissions"in a),s=r(),u="string"==typeof e?{name:e}:e,i=r(),update=()=>{var e,t;i.value=null!=(t=null==(e=s.value)?void 0:e.state)?t:"prompt"};useEventListener(s,"change",update,{passive:!0});const c=o(async()=>{if(l.value){if(!s.value)try{s.value=await a.permissions.query(u)}catch(e){s.value=void 0}finally{update()}return n?f(s.value):void 0}});return c(),n?{state:i,isSupported:l,query:c}:i}function useClipboard(e={}){const{navigator:t=b,read:n=!1,source:a,copiedDuring:s=1500,legacy:u=!1}=e,o=useSupported(()=>t&&"clipboard"in t),i=usePermission("clipboard-read"),d=usePermission("clipboard-write"),p=c(()=>o.value||u),m=r(""),f=r(!1),y=l(()=>f.value=!1,s,{immediate:!1});function isAllowed(e){return"granted"===e||"prompt"===e}return p.value&&n&&useEventListener(["copy","cut"],async function(){let e=!(o.value&&isAllowed(i.value));if(!e)try{m.value=await t.clipboard.readText()}catch(t){e=!0}var n,a,l;e&&(m.value=null!=(l=null==(a=null==(n=null==document?void 0:document.getSelection)?void 0:n.call(document))?void 0:a.toString())?l:"")},{passive:!0}),{isSupported:p,text:m,copied:f,copy:async function(e=v(a)){if(p.value&&null!=e){let n=!(o.value&&isAllowed(d.value));if(!n)try{await t.clipboard.writeText(e)}catch(e){n=!0}n&&function(e){const t=document.createElement("textarea");t.value=null!=e?e:"",t.style.position="absolute",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}(e),m.value=e,f.value=!0,y.start()}}}}export{useClipboard as a,createReusableTemplate as c,useEventListener as u};
//# sourceMappingURL=index2.mjs.map
