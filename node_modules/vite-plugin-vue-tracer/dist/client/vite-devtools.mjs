import { events, isEnabled } from 'vite-plugin-vue-tracer/client/listeners';
import { state } from 'vite-plugin-vue-tracer/client/overlay';

function enable(ctx) {
  events.on("click", (e) => {
    ctx.rpc["vite:core:open-in-editor"](`${e.pos[0]}:${e.pos[1]}:${e.pos[2]}`);
    state.isVisible = false;
  });
  isEnabled.value = !isEnabled.value;
  state.isVisible = isEnabled.value;
  ctx.docks.switchEntry(isEnabled.value ? ctx.current.entryMeta.id : null);
}

export { enable as default };
