import { ofetch } from "ofetch";
import { createError } from "h3";
export function createCloudflareAPI(accountId, apiToken, basePath = "") {
  return ofetch.create({
    baseURL: `https://api.cloudflare.com/client/v4/accounts/${accountId}${basePath}`,
    headers: {
      Authorization: `Bearer ${apiToken}`
    }
  });
}
export function handleCloudflareError(err, defaultMessage = "Cloudflare API error") {
  const data = err.data || err.response?._data || {};
  throw createError({
    statusCode: err.status || err.statusCode || 500,
    statusMessage: defaultMessage,
    message: data?.errors?.[0]?.message || data?.error?.[0]?.message || "Detailed error not returned",
    data: data?.errors || data?.error
  });
}
